(self["webpackChunkarcheage_parser"]=self["webpackChunkarcheage_parser"]||[]).push([[792],{866:(e,t,n)=>{const{Damage:a}=n(6500);e.exports={"Earthen Grip":a,Enervate:a,[`Dahuta's Breath`]:a,"Focal Concussion":a}},1340:(e,t,n)=>{const{Damage:a,Health:o,Mana:s,Recovery:r,Buff:c,Movement:i,Skill:l,Misc:m}=n(6500);const u={[a]:"#ff0000",[o]:"#008000",[s]:"#0000ff",[r]:"#800080",[c]:"#000000",[i]:"#000000",[l]:"#000000",[m]:"#000000"};e.exports=function e(t){return u[t]||u[m]}},1440:(e,t,n)=>{"use strict";var a=n(6540);var o=n(5338);var s=n(3048);var r=n(1680);var c=n(4805);var i=n(1511);var l=n(6500);const m=(0,i.v)(e=>({displayType:l.Damage,setDisplayType:t=>e(()=>({displayType:t}))}));const u=m;const d=[l.Damage,l.Health,l.Mana,l.Recovery,l.Buff,l.Movement,l.Skill,l.Misc];function p(){const e=u(e=>e.displayType);const t=u(e=>e.setDisplayType);return a.createElement(r.A,{expand:"lg",className:"bg-body-tertiary"},a.createElement(s.A,{fluid:true},a.createElement(r.A.Brand,{href:"#home",style:{fontVariant:"small-caps"}},"Archeage Combat Log Parser"),a.createElement(c.A,{align:"end"},a.createElement(c.A.Toggle,{variant:"primary",id:"dropdown-basic"},"Display"),a.createElement(c.A.Menu,null,d.map(n=>a.createElement(c.A.Item,{key:n,active:e===n,onClick:()=>t(n)},n))))))}var g=n(6386);const f=(0,i.v)(e=>({statistics:null,isProcessing:false,setStatistics:(t={})=>e(()=>({statistics:t,isProcessing:false})),clearStatistics:(t=false,n=null)=>e({statistics:n,isProcessing:t})}));const h=f;var y=n(1821);var v=n.n(y);const b={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:2,borderColor:"#eeeeee",borderStyle:"dashed",backgroundColor:"#fafafa",color:"#bdbdbd",outline:"none",transition:"border .24s ease-in-out"};const x={borderColor:"#2196f3"};const k={borderColor:"#00e676"};const S={borderColor:"#ff1744"};const E=true;function D(){const{setStatistics:e,clearStatistics:t}=h();const n=(0,a.useCallback)(async n=>{if(n.length!==1){return}const a=n.at(0);const o=a.stream();try{t(E,{});await new Promise(e=>setTimeout(e,1));const n=new(v())(o);await n.parseData();const a=n.getData();e(a)}catch(e){t(!E);console.debug("Processing error");console.trace(e)}},[]);const{getRootProps:o,getInputProps:r,isFocused:c,isDragAccept:i,isDragReject:l}=(0,g.VB)({onDrop:n});const m=(0,a.useMemo)(()=>({...b,...c?x:{},...i?k:{},...l?S:{}}),[c,i,l]);return a.createElement(s.A,{className:"d-flex flex-column flex-grow-1 justify-content-center pt-5 pb-5"},a.createElement("div",o({style:m}),a.createElement("input",r()),a.createElement("p",null,"Drag 'n' drop a combat log here, or click to select the file")))}var A=n(778);var w=n(7721);var T=n(4228);var R=n(3434);var M=n(1446);var C=n(767);var B=n(3458);var H=n(3546);var O=n(4783);var P=n(4725);var F=n(4118);var L=n(3540);var N=n(1340);var G=n.n(N);const z="#000";const j="#fff";const I={top:40,left:200,right:40,bottom:40};const W={...P.k,minWidth:60,backgroundColor:"rgba(0,0,0, 0.75)",color:"white"};const V="name";const $=e=>e[V];let _;function q({data:e,type:t}){const n=Object.keys(e.at(0)).filter(e=>e!==V);const o=(0,a.useMemo)(()=>e.reduce((e,t)=>{const a=n.reduce((e,n)=>{e+=Number(t[n]);return e},0);e.push(a);return e},[]),[e]);const s=(0,a.useMemo)(()=>(0,B.A)({domain:e.map($),padding:.2}),[e]);const r=(0,a.useMemo)(()=>(0,H.A)({domain:[0,Math.max(...o)],nice:true}),[e]);const c=(0,a.useMemo)(()=>(0,O.A)({domain:n,range:[G()(t)]}),[e]);const{margin:i=I,tooltipOpen:l,tooltipLeft:m,tooltipTop:u,tooltipData:d,hideTooltip:p,showTooltip:g}=(0,F.A)();const{parentRef:f,width:h,height:y}=(0,w.A)({debounceTime:150});const v=h-i.left-i.right;const b=y-i.top-i.bottom;r.rangeRound([0,v]);s.rangeRound([b,0]);return a.createElement("div",{ref:f,className:"d-flex flex-column flex-grow-1 p-0 mt-3 mb-3"},a.createElement("svg",{width:h,height:y},a.createElement("rect",{width:h,height:y,fill:j,rx:14}),a.createElement(R.A,{top:i.top,left:i.left},a.createElement(T.A,{data:e,keys:n,height:b,y:$,yScale:s,xScale:r,color:c},e=>e.map(e=>e.bars.map(t=>a.createElement("rect",{key:`barstack-horizontal-${e.index}-${t.index}`,x:t.x,y:t.y,width:t.width,height:t.height,fill:t.color,onMouseLeave:()=>{_=window.setTimeout(()=>{p()},300)},onMouseMove:e=>{clearTimeout(_);const n=(0,L.A)(e);g({tooltipData:t,tooltipTop:n?.y??0,tooltipLeft:n?.x??0})}})))),a.createElement(M.A,{hideTicks:true,numTicks:e.length,scale:s,stroke:z,tickStroke:z,tickLabelProps:{fill:z,fontSize:11,textAnchor:"end",dy:"0.33em"}}),a.createElement(C.A,{top:b,scale:r,stroke:z,tickStroke:z,tickLabelProps:{fill:z,fontSize:11,textAnchor:"middle"}}))),l&&d&&a.createElement(P.A,{top:u,left:m,style:W},a.createElement("div",{style:{color:c(d.key)}},a.createElement("strong",null,d.key)),a.createElement("div",null,d.bar.data[d.key]),a.createElement("div",null,a.createElement("small",null,$(d.bar.data)))))}function J(){const e=u(e=>e.displayType);const t=h(e=>e.statistics);const n=h(e=>e.isProcessing);if(n){return a.createElement("div",{className:"pt-5 pb-5 text-center"},a.createElement(A.A,{animation:"border",role:"status"},a.createElement("span",{className:"visually-hidden"},"Processing...")))}return a.createElement(q,{width:"800",height:"600",data:t[e].slice(0,20),type:e})}function K(){const e=h(e=>e.statistics);return a.createElement(a.Fragment,null,a.createElement(p,null),a.createElement(s.A,{fluid:true,className:"d-flex flex-column flex-grow-1"},e?a.createElement(J,{data:e}):a.createElement(D,null)))}function Q(){return a.createElement(K,null)}const U=(0,o.H)(document.getElementById("react-app"));U.render(a.createElement(Q,null))},1591:(e,t,n)=>{const{Health:a,Mana:o,Recovery:s,Misc:r}=n(6500);const c=n(1599);const i=n(9860);const l=n(6934);const m=n(5629);const u=n(8145);const d=n(9413);const p=n(7492);const g=n(1600);const f=n(4026);const h=n(4039);const y=n(9752);const v=n(7932);const b=n(9780);const x=n(7694);const k=n(7700);const S=n(866);const E={...c,...i,...l,...m,...u,...d,...p,...g,...f,...h,...y,...v,...b,...x,...k,...S};const D={"[Dance] Dance of Hope":"Dance of Hope","[Perform] Ode to Recovery":"Ode to Recovery","Bleeding (Rank 1)":"Bleeding"};const A=e=>{const[,t,...n]=e.slice(1).split("|");if(!t){return null}const c={name:t.slice(8),type:r,target:null,action:null,amount:0};const i=n.join("|");const l=i.indexOf("cff9be85a");if(l!==-1){const e=i.indexOf("|",l);c.amount=Number(i.slice(l+9,e))}else{const e=i.indexOf("cffc13d36");if(e!==-1){const t=i.indexOf("|",e);c.amount=Number(i.slice(e+10,t))}}const m=i.indexOf("cff57d6ae");if(m!==-1){const e=i.indexOf("|",m);c.action=i.slice(m+9,e)}const u=i.indexOf("r targeted");if(u!==-1){const e=i.indexOf("|",u);c.target=i.slice(u+11,e)}c.type=E[c.action]||c.type;if(i.includes("r to restore")&&c.type!==s){c.type=i.endsWith("mana.")?o:a}c.action=D[c.action]||c.action;return c};e.exports={parseCombatEntry:A}},1599:(e,t,n)=>{const{Damage:a}=n(6500);e.exports={"Endless Arrows":a,"Charged Bolt":a,"Fending Arrow":a,"Blazing Arrow":a,"Concussive Arrow":a,"Missile Rain":a,Snipe:a}},1600:(e,t,n)=>{const{Damage:a}=n(6500);e.exports={"Crippling Mire":a,"Absorb Lifeforce":a,"Cursed Thorns":a,Boneyard:a,"Crow Attack":a,"Hell Spear":a,[`Death's Vengeance`]:a}},1821:(e,t,n)=>{const a=n(3539);const{parseCombatEntry:o}=n(1591);const{Damage:s,Health:r,Mana:c,Recovery:i,Buff:l,Movement:m,Skill:u,Misc:d}=n(6500);class p{#e;#t=[];#n=new Map;constructor(e){this.#e=e}async parseData(){const e=this.#e.pipeThrough(new TextDecoderStream).pipeThrough(new a);for await(const t of e){const e=o(t);if(!e){continue}this.#t.push(e);const{name:n,type:a,action:s,amount:r}=e;if(!this.#n.has(n)){this.#n.set(n,p.createMemo(n))}if(a===d){continue}const c=this.#n.get(n);const i=c[a][s]??0;c[a][s]=i+r}return Array.from(this.#n.values())}getType(e,t){const n=Array.from(this.#n.values()).sort((t,n)=>p.sumAmount(n,e)-p.sumAmount(t,e));return n.slice(0,t).map(t=>({name:t.name,[e]:p.sumAmount(t,e)}))}getData(e=Infinity){return{[s]:this.getType(s,e),[r]:this.getType(r,e),[c]:this.getType(c,e),[i]:this.getType(i,e),[l]:this.getType(l,e),[m]:this.getType(m,e),[u]:this.getType(u,e),[d]:this.getType(d,e)}}static createMemo(e){return{name:e,[s]:{},[r]:{},[c]:{},[i]:{},[l]:{},[m]:{},[u]:{}}}static sumAmount(e,t){return Object.values(e[t]??{}).reduce((e,t)=>e+t,0)}}e.exports=p},3539:e=>{const t="\n";const n=t.length;const a={async transform(e,a){e=await e;let o=this.buffers.slice();let s=0;for(;;){const r=e.indexOf(t,s);if(r===-1){this.buffers.push(r>0?e.slice(r):e);return}const c=o.length?o.join(""):"";if(c){o=[];this.buffers=o}a.enqueue(c+e.slice(s,r));s=r+n}}};class o extends TransformStream{constructor(){super({...a,buffers:[]})}}e.exports=o},4026:(e,t,n)=>{const{Recovery:a}=n(6500);e.exports={"Healing Potion":a,"Minor Healing Potion":a,"Health Regen Food":a,"Earth Lunafrost":a,[`Judge's Longing`]:a,"Found Wild Ginseng!":a,"Absorb Damage":a,"Revitalizing Cheer":a,"Sand Soulshard":a,[`Healer's Chalice`]:a,[`Orange Goblet of Honor (Rank 1)`]:a,[`Orange Goblet of Honor (Rank 2)`]:a,[`Orange Goblet of Honor (Rank 3)`]:a,"Conversion Shield":a,"Flame Conversion Shield (Rank 5)":a,"Golden Dawn":a}},4039:(e,t,n)=>{const{Damage:a}=n(6500);e.exports={"Rapid Strike":a,Poisoned:a,"Pin Down":a,"Bleeding (Rank 1)":a,Overwhelm:a,Wallop:a,Shadowsmite:a,"Throw Dagger":a}},5629:(e,t,n)=>{const{Damage:a}=n(6500);e.exports={"Shield Slam":a,"Bull Rush":a,"Boastful Roar":a,Retribution:a}},6500:e=>{const t="damage";const n="health";const a="mana";const o="recovery";const s="buff";const r="movement";const c="skill";const i="misc";e.exports={Damage:t,Health:n,Mana:a,Recovery:o,Buff:s,Movement:r,Skill:c,Misc:i}},6934:(e,t,n)=>{const{Damage:a}=n(6500);e.exports={"Triple Slash":a,Charge:a,"Sunder Earth":a,"Precision Strike":a,"Tiger Strike":a,"Hammer Toss":a,"Behind Enemy Lines":a}},7492:(e,t,n)=>{const{Damage:a}=n(6500);e.exports={"Mana Bolts":a,"Crashing Wave":a,"Serpent Bite":a,"Soulbound Edge":a,"Ghastly Pack":a,"Ring Throw":a,Bladefall:a}},7694:(e,t,n)=>{const{Damage:a}=n(6500);e.exports={"Blade Flurry":a,"Crescent Slice":a,"Sinister Strike":a,"Relentless Assault":a,Entangle:a,Bladeblast:a,"Twin Shadow Slash":a}},7700:(e,t,n)=>{const{Damage:a,Health:o,Skill:s}=n(6500);e.exports={Antithesis:a,Resurgence:o,"Life Skewer":o,Mend:o,"Fervent Healing":o,"Gradual Recovery":o,"Healing Circle":o,Revive:s,"Mana Barrier":s}},7932:(e,t,n)=>{const{Damage:a}=n(6500);e.exports={Flamebolt:a,"Freezing Arrow":a,"Arc Lightning":a,"Electric Shock":a,"Freezing Earth":a,"Flame Barrier":a,"Chain Lightning":a,"Searing Rain":a,"Meteor Strike":a}},8145:(e,t,n)=>{const{Damage:a}=n(6500);e.exports={"Ceaseless Fire":a,"Corrosive Barrage":a,Backdraft:a,"Splinter Shell":a,"Blight Bolt":a,"Vicious Rebuke":a,"Trigger Happy":a,"Collateral Damage":a}},9413:(e,t,n)=>{const{Health:a}=n(6500);e.exports={"Healing Talisman":a,[`Black Dragon's Serenity`]:a}},9752:(e,t,n)=>{const{Health:a,Skill:o}=n(6500);e.exports={"Healing Hymn":o,"[Perform] Ode to Recovery":a}},9780:(e,t,n)=>{const{Damage:a,Health:o}=n(6500);e.exports={[`Dancer's Touch`]:a,"[Dance] Dance of Hope":o,"Divine Blessing":o}},9860:(e,t,n)=>{const{Damage:a}=n(6500);e.exports={[`Comet's Boon`]:a,"Vicious Implosion":a}}},e=>{var t=t=>e(e.s=t);e.O(0,[121],()=>t(1440));var n=e.O()}]);