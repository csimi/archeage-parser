(self["webpackChunkarcheage_parser"]=self["webpackChunkarcheage_parser"]||[]).push([[792],{866:(e,t,a)=>{const{types:s}=a(3307);const{Damage:n}=s;e.exports={"Earthen Grip":n,Enervate:n,[`Dahuta's Breath`]:n,"Focal Concussion":n}},1340:(e,t,a)=>{const{types:s}=a(3307);const{Damage:n,Health:o,Taken:r,Received:c,Recovery:l,Loved:i,Hated:m,Loves:u,Hates:f,Misc:d}=s;const p={[n]:"#ff0000",[o]:"#008000",[r]:"#0000ff",[c]:"#90ee90",[l]:"#800080",[i]:"#00ff00",[m]:"#ff8000",[u]:"#00ff00",[f]:"#ff8000",[d]:"#000000"};const g=e=>p[e]??p[d];e.exports={colors:p,getColor:g}},1440:(e,t,a)=>{"use strict";var s=a(6540);var n=a(5338);var o=a(3048);var r=a(1680);var c=a(4805);var l=a(1376);var i=a(1511);var m=a(3307);const{Overview:u}=m.types;const f=(0,i.v)(e=>({displayType:u,setDisplayType:t=>e(()=>({displayType:t})),focusName:"",setFocusName:({target:t})=>e(()=>({focusName:t.value}))}));const d=f;const{Overview:p,Damage:g,Health:y,Taken:h,Received:v,Recovery:x,Loved:E,Hated:b,Loves:w,Hates:A}=m.types;const T=[p,g,y,h,v,x,E,b,w,A];function k(){const e=d(e=>e.displayType);const t=d(e=>e.setDisplayType);const a=d(e=>e.focusName);const n=d(e=>e.setFocusName);return s.createElement(r.A,{expand:"lg",className:"bg-body-tertiary"},s.createElement(o.A,{fluid:true},s.createElement(r.A.Brand,{style:{fontVariant:"small-caps"}},"Archeage Combat Log Parser"),s.createElement("div",{className:"d-flex flex-row"},s.createElement(l.A.Group,{className:"me-2"},s.createElement(l.A.Control,{type:"text",placeholder:"Focus Name",value:a,onInput:n})),s.createElement(c.A,{align:"end"},s.createElement(c.A.Toggle,{variant:"primary",id:"dropdown-basic"},"Display"),s.createElement(c.A.Menu,null,T.map(a=>s.createElement(c.A.Item,{key:a,active:e===a,onClick:()=>t(a)},(0,m.getTypeName)(a))))))))}var N=a(6386);const S=(0,i.v)(e=>({statistics:null,isProcessing:false,setStatistics:(t={})=>e(()=>({statistics:t,isProcessing:false})),clearStatistics:(t=false,a=null)=>e({statistics:a,isProcessing:t})}));const D=S;var C=a(1821);var H=a.n(C);const M={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:2,borderColor:"#eeeeee",borderStyle:"dashed",backgroundColor:"#fafafa",color:"#bdbdbd",outline:"none",transition:"border .24s ease-in-out"};const R={borderColor:"#2196f3"};const B={borderColor:"#00e676"};const L={borderColor:"#ff1744"};const O=true;function F(){const[e,t]=(0,s.useState)(true);const{setStatistics:a,clearStatistics:n}=D();const r=(0,s.useCallback)(async t=>{if(t.length!==1){return}const s=t.at(0);const o=s.stream();try{n(O,{});await new Promise(e=>setTimeout(e,42));const t=new(H())(o);await t.parseData({useIgnore:e});a(t)}catch(e){n(!O);console.debug("Processing error");console.trace(e)}},[e]);const{getRootProps:c,getInputProps:i,isFocused:m,isDragAccept:u,isDragReject:f}=(0,N.VB)({onDrop:r});const d=(0,s.useMemo)(()=>({...M,...m?R:{},...u?B:{},...f?L:{}}),[m,u,f]);return s.createElement(o.A,{className:"d-flex flex-column flex-grow-1 justify-content-center pt-5 pb-5"},s.createElement("div",null,s.createElement(l.A.Check,{type:"checkbox",label:"Ignore PVE",checked:e,onChange:()=>t(!e)})),s.createElement("div",c({style:d}),s.createElement("input",i()),s.createElement("p",null,"Drag 'n' drop a combat log here, or click to select the file")))}var P=a(778);var I=a(4479);var G=a(1105);var j=a(7721);var z=a(7843);var W=a(4228);var V=a(3434);var J=a(1446);var $=a(767);var _=a(3458);var q=a(3546);var K=a(4783);var X=a(4725);var Y=a(4118);var Q=a(1340);const U="#000";const Z="#fff";const ee={top:40,left:150,right:40,bottom:40};const te={...X.k,minWidth:60,backgroundColor:"rgba(0,0,0, 0.75)",color:"white"};const ae="name";const se=e=>e[ae];function ne({data:e,type:t,title:a}){const n=Object.keys(e.at(0)??{}).filter(e=>e!==ae);const o=(0,s.useMemo)(()=>e.reduce((e,t)=>{const a=n.reduce((e,a)=>{e+=Number(t[a]);return e},0);e.push(a);return e},[]),[e]);const r=(0,s.useMemo)(()=>(0,_.A)({domain:e.map(se),padding:.2}),[e]);const c=(0,s.useMemo)(()=>(0,q.A)({domain:[0,Math.max(...o)],nice:true}),[e]);const l=(0,s.useMemo)(()=>(0,K.A)({domain:n,range:[(0,Q.getColor)(t)]}),[e]);const{margin:i=ee,tooltipOpen:u,tooltipLeft:f,tooltipTop:d,tooltipData:p,hideTooltip:g,showTooltip:y}=(0,Y.A)();const{parentRef:h,width:v,height:x}=(0,j.A)({debounceTime:150});const E=v-i.left-i.right;const b=x-i.top-i.bottom;c.rangeRound([0,E]);r.rangeRound([b,0]);return s.createElement("div",{ref:h,className:"d-flex flex-column flex-grow-1 p-0 mt-3 mb-3"},s.createElement("svg",{width:v,height:x},s.createElement("rect",{width:v,height:x,fill:Z,rx:14}),s.createElement(z.A,{verticalAnchor:"start"},a),s.createElement(V.A,{top:i.top,left:i.left},s.createElement(W.A,{data:e,keys:n,height:b,y:se,yScale:r,xScale:c,color:l},e=>e.map(e=>e.bars.map(t=>s.createElement("rect",{key:`barstack-horizontal-${e.index}-${t.index}`,x:t.x,y:t.y,width:t.width,height:t.height,fill:t.color,onMouseLeave:()=>{g()},onMouseMove:e=>{y({tooltipData:t,tooltipTop:e?.nativeEvent?.pageY??0,tooltipLeft:e?.nativeEvent?.pageX??0})}})))),s.createElement(J.A,{hideTicks:true,numTicks:e.length,scale:r,stroke:U,tickStroke:U,tickLabelProps:{fill:U,fontSize:11,textAnchor:"end",dy:"0.33em"}}),s.createElement($.A,{numTicks:5,top:b,scale:c,stroke:U,tickStroke:U,tickLabelProps:{fill:U,fontSize:11,textAnchor:"middle"}}))),u&&p&&s.createElement(X.A,{top:d,left:f,style:te},s.createElement("div",{style:{color:l(p.key)}},s.createElement("strong",null,(0,m.getTypeName)(p.key))),s.createElement("div",null,p.bar.data[p.key]),s.createElement("div",null,s.createElement("small",null,se(p.bar.data)))))}var oe=a(7690);const{Overview:re,Damage:ce,Health:le,Taken:ie,Received:me,Recovery:ue}=m.types;function fe(){const e=d(e=>e.displayType);const t=d(e=>e.focusName);const a=D(e=>e.statistics);const n=D(e=>e.isProcessing);if(n){return s.createElement("div",{className:"pt-5 pb-5 text-center"},s.createElement(P.A,{animation:"border",role:"status"},s.createElement("span",{className:"visually-hidden"},"Processing...")))}const r=t?a.getName(t,false):undefined;if(r){if(e===re){return s.createElement(o.A,{fluid:true,className:"d-flex flex-column flex-grow-1"},s.createElement(I.A,{className:"flex-row flex-grow-1"},s.createElement(G.A,{className:"d-flex flex-column flex-grow-1"},s.createElement(ne,{data:(0,oe.getFocus)(r[ce],ce).slice(0,20),type:ce,title:(0,m.getTypeName)(ce)})),s.createElement(G.A,{className:"d-flex flex-column flex-grow-1"},s.createElement(ne,{data:(0,oe.getFocus)(r[le],le).slice(0,20),type:le,title:(0,m.getTypeName)(le)})),s.createElement(G.A,{className:"d-flex flex-column flex-grow-1"},s.createElement(ne,{data:(0,oe.getFocus)(r[ie],ie).slice(0,20),type:ie,title:(0,m.getTypeName)(ie)}))),s.createElement(I.A,{className:"flex-row flex-grow-1"},s.createElement(G.A,{className:"d-flex flex-column flex-grow-1"},s.createElement(ne,{data:(0,oe.getFocus)(r[me],me).slice(0,20),type:me,title:(0,m.getTypeName)(me)})),s.createElement(G.A,{className:"d-flex flex-column flex-grow-1"},s.createElement(ne,{data:(0,oe.getFocus)(r[ue],ue).slice(0,20),type:ue,title:(0,m.getTypeName)(ue)})),s.createElement(G.A,{className:"d-flex flex-column flex-grow-1"},"Â ")))}return s.createElement(ne,{data:(0,oe.getFocus)(r[e],e).slice(0,50),type:e,title:(0,m.getTypeName)(e)})}const c=a.getData();if(e===re){return s.createElement(o.A,{fluid:true,className:"d-flex flex-column flex-grow-1"},s.createElement(I.A,{className:"flex-row flex-grow-1"},s.createElement(G.A,{className:"d-flex flex-column flex-grow-1"},s.createElement(ne,{data:c[ce].slice(0,20),type:ce,title:(0,m.getTypeName)(ce)})),s.createElement(G.A,{className:"d-flex flex-column flex-grow-1"},s.createElement(ne,{data:c[le].slice(0,20),type:le,title:(0,m.getTypeName)(le)})),s.createElement(G.A,{className:"d-flex flex-column flex-grow-1"},s.createElement(ne,{data:c[ie].slice(0,20),type:ie,title:(0,m.getTypeName)(ie)}))),s.createElement(I.A,{className:"flex-row flex-grow-1"},s.createElement(G.A,{className:"d-flex flex-column flex-grow-1"},s.createElement(ne,{data:c[me].slice(0,20),type:me,title:(0,m.getTypeName)(me)})),s.createElement(G.A,{className:"d-flex flex-column flex-grow-1"},s.createElement(ne,{data:c[ue].slice(0,20),type:ue,title:(0,m.getTypeName)(ue)})),s.createElement(G.A,{className:"d-flex flex-column flex-grow-1"},"Â ")))}return s.createElement(ne,{data:c[e].slice(0,50),type:e,title:(0,m.getTypeName)(e)})}function de(){const e=D(e=>e.statistics);return s.createElement(s.Fragment,null,s.createElement(k,null),s.createElement(o.A,{fluid:true,className:"d-flex flex-column flex-grow-1"},e?s.createElement(fe,{data:e}):s.createElement(F,null)))}function pe(){return s.createElement(de,null)}const ge=(0,n.H)(document.getElementById("react-app"));ge.render(s.createElement(pe,null))},1591:(e,t,a)=>{const{types:s}=a(3307);const n=a(1599);const o=a(9860);const r=a(6934);const c=a(5629);const l=a(8145);const i=a(9413);const m=a(7492);const u=a(1600);const f=a(4026);const d=a(4039);const p=a(9752);const g=a(7932);const y=a(9780);const h=a(7694);const v=a(7700);const x=a(866);const{Damage:E,Health:b,Mana:w,Recovery:A,Misc:T}=s;const k={...n,...o,...r,...c,...l,...i,...m,...u,...f,...d,...p,...g,...y,...h,...v,...x};const N=e=>{const[,t,...a]=e.trim().slice(1).split("|");if(!t){return null}const s={name:t.slice(8),type:T,target:null,action:null,amount:0};const n=a.join("|");const o=n.indexOf("cff9be85a");if(o!==-1){const e=n.indexOf("|",o);s.amount=Number(n.slice(o+9,e))}else{const e=n.indexOf("cffc13d36");if(e!==-1){const t=n.indexOf("|",e);s.amount=Number(n.slice(e+10,t))}}const r=n.indexOf("cff57d6ae");if(r!==-1){const e=n.indexOf("|",r);s.action=n.slice(r+9,e)}const c=n.includes("r attacked")?n.indexOf("r attacked"):n.indexOf("r targeted");if(c!==-1){const e=n.indexOf("|",c);s.target=n.slice(c+11,e)}s.action=s.action?.replace(/[[(][^\])]+[\])]/g,"").trim();s.type=k[s.action]||s.type;if(n.includes("r to restore")&&s.type!==A){s.type=n.endsWith("mana.")?w:b}else if(n.includes("r attacked")){s.type=E}return s};e.exports={parseCombatEntry:N}},1599:(e,t,a)=>{const{types:s}=a(3307);const{Damage:n}=s;e.exports={"Endless Arrows":n,"Charged Bolt":n,"Fending Arrow":n,"Blazing Arrow":n,"Concussive Arrow":n,"Missile Rain":n,Snipe:n}},1600:(e,t,a)=>{const{types:s}=a(3307);const{Damage:n,Recovery:o}=s;e.exports={"Crippling Mire":n,"Absorb Lifeforce":o,"Cursed Thorns":n,Boneyard:n,"Crow Attack":n,"Hell Spear":n,[`Death's Vengeance`]:n}},1821:(e,t,a)=>{const s=a(3539);const{parseCombatEntry:n}=a(1591);const{types:o,reverseTypes:r}=a(3307);const c=a(2519);const{Damage:l,Health:i,Mana:m,Taken:u,Received:f,Recovery:d,Buff:p,Debuff:g,Movement:y,Skill:h,Misc:v,Loved:x,Hated:E,Loves:b,Hates:w}=o;class A{#e;#t=[];#a=new Map;constructor(e){this.#e=e}async parseData({useIgnore:e=false}={}){const t=this.#e.pipeThrough(new TextDecoderStream).pipeThrough(new s);for await(const a of t){const t=n(a);if(!t){continue}this.#t.push(t);const{name:s,type:o,action:i,amount:m,target:u}=t;if(o===v){continue}if(o===l&&s===u){continue}if(e&&(c.includes(u)||u?.includes(" "))){continue}const f=this.getName(s);if(f){f[o][i]=(f[o][i]??0)+m}const d=r[o];if(d){const e=this.getName(u);if(e){e[d][i]=(e[d][i]??0)+m;e[o===l?E:x][s]=(e[o===l?E:x][s]??0)+m;if(f){f[o===l?w:b][u]=(f[o===l?w:b][u]??0)+m}}}}return Array.from(this.#a.values())}getName(e,t=true){if(!e||e.includes(" ")||c.includes(e)){return}const a=e.toLowerCase();if(!this.#a.has(a)){if(!t){return}this.#a.set(a,A.createMemo(e))}return this.#a.get(a)}getType(e,t){const a=Array.from(this.#a.values()).sort((t,a)=>A.sumAmount(a,e)-A.sumAmount(t,e));return a.slice(0,t).map(t=>({name:t.name,[e]:A.sumAmount(t,e)}))}getData(e=Infinity){return{[l]:this.getType(l,e),[i]:this.getType(i,e),[m]:this.getType(m,e),[u]:this.getType(u,e),[f]:this.getType(f,e),[d]:this.getType(d,e),[p]:this.getType(p,e),[g]:this.getType(g,e),[y]:this.getType(y,e),[h]:this.getType(h,e),[v]:this.getType(v,e),[x]:[],[E]:[],[b]:[],[w]:[]}}static createMemo(e){return{name:e,[l]:{},[i]:{},[m]:{},[u]:{},[f]:{},[d]:{},[p]:{},[g]:{},[y]:{},[h]:{},[x]:{},[E]:{},[b]:{},[w]:{}}}static sumAmount(e,t){return Object.values(e[t]??{}).reduce((e,t)=>e+t,0)}}e.exports=A},2519:e=>{e.exports=["Meina","Glenn","Anthalon","Bloodspire","Kraken"]},3307:e=>{const t="overview";const a="damage";const s="health";const n="mana";const o="taken";const r="received";const c="recovery";const l="buff";const i="debuff";const m="movement";const u="skill";const f="misc";const d="loved";const p="hated";const g="loves";const y="hates";const h={Overview:t,Damage:a,Health:s,Mana:n,Taken:o,Received:r,Recovery:c,Buff:l,Debuff:i,Movement:m,Skill:u,Misc:f,Loved:d,Hated:p,Loves:g,Hates:y};const v={[t]:"Overview",[a]:"Damage",[s]:"Healing",[n]:"Mana",[o]:"Damage Taken",[r]:"Healing Received",[c]:"Self Recovery",[l]:"Buffs",[i]:"Debuff",[m]:"Movement",[u]:"Skill",[f]:"Miscellaneous",[d]:"Loved by",[p]:"Hated by",[g]:"Loves",[y]:"Hates"};const x={[a]:o,[s]:r};const E=e=>v[e]??v[f];e.exports={types:h,reverseTypes:x,getTypeName:E,Overview:t}},3539:e=>{const t="\n";const a=t.length;const s={async transform(e,s){e=await e;let n=this.buffers.slice();let o=0;for(;;){const r=e.indexOf(t,o);if(r===-1){this.buffers.push(r>0?e.slice(r):e);return}const c=n.length?n.join(""):"";if(c){n=[];this.buffers=n}s.enqueue(c+e.slice(o,r));o=r+a}}};class n extends TransformStream{constructor(){super({...s,buffers:[]})}}e.exports=n},4026:(e,t,a)=>{const{types:s}=a(3307);const{Recovery:n,Mana:o}=s;e.exports={"Healing Potion":n,"Minor Healing Potion":n,"Mana Potion":o,"Minor Mana Potion":o,"Health Regen Food":n,"Earth Lunafrost":n,[`Judge's Longing`]:n,[`Enhanced Judge's Longing`]:n,"Found Wild Ginseng!":n,"Absorb Damage":n,"Revitalizing Cheer":n,"Sand Soulshard":n,"Wind Soulshard":n,"Lunar Soulshard":n,[`Healer's Chalice`]:n,"Orange Goblet of Honor":n,"Conversion Shield":n,"Flame Conversion Shield":n,"Healing Grimoire":n}},4039:(e,t,a)=>{const{types:s}=a(3307);const{Damage:n}=s;e.exports={"Rapid Strike":n,Poisoned:n,"Pin Down":n,"Bleeding (Rank 1)":n,Overwhelm:n,Wallop:n,Shadowsmite:n,"Throw Dagger":n}},5629:(e,t,a)=>{const{types:s}=a(3307);const{Damage:n}=s;e.exports={"Shield Slam":n,"Bull Rush":n,"Boastful Roar":n,Retribution:n}},6934:(e,t,a)=>{const{types:s}=a(3307);const{Damage:n}=s;e.exports={"Triple Slash":n,Charge:n,"Sunder Earth":n,"Precision Strike":n,"Tiger Strike":n,"Hammer Toss":n,"Behind Enemy Lines":n}},7492:(e,t,a)=>{const{types:s}=a(3307);const{Damage:n}=s;e.exports={"Mana Bolts":n,"Crashing Wave":n,"Serpent Bite":n,"Soulbound Edge":n,"Ghastly Pack":n,"Ring Throw":n,Bladefall:n}},7690:e=>{const t=(e,t)=>Object.entries(e).map(([e,a])=>({name:e,[t]:a})).sort((e,a)=>a[t]-e[t]);e.exports={getFocus:t}},7694:(e,t,a)=>{const{types:s}=a(3307);const{Damage:n}=s;e.exports={"Blade Flurry":n,"Crescent Slice":n,"Sinister Strike":n,"Relentless Assault":n,Entangle:n,Bladeblast:n,"Twin Shadow Slash":n}},7700:(e,t,a)=>{const{types:s}=a(3307);const{Damage:n,Health:o,Skill:r}=s;e.exports={Antithesis:n,Resurgence:o,"Life Skewer":o,Mend:o,"Fervent Healing":o,"Gradual Recovery":o,"Healing Circle":o,Revive:r,"Mana Barrier":r}},7932:(e,t,a)=>{const{types:s}=a(3307);const{Damage:n}=s;e.exports={Flamebolt:n,"Freezing Arrow":n,"Arc Lightning":n,"Electric Shock":n,"Freezing Earth":n,"Flame Barrier":n,"Chain Lightning":n,"Searing Rain":n,"Meteor Strike":n}},8145:(e,t,a)=>{const{types:s}=a(3307);const{Damage:n}=s;e.exports={"Ceaseless Fire":n,"Corrosive Barrage":n,Backdraft:n,"Splinter Shell":n,"Blight Bolt":n,"Vicious Rebuke":n,"Trigger Happy":n,"Collateral Damage":n}},9413:(e,t,a)=>{const{types:s}=a(3307);const{Health:n}=s;e.exports={"Healing Talisman":n,[`Black Dragon's Serenity`]:n,"Golden Dawn":n}},9752:(e,t,a)=>{const{types:s}=a(3307);const{Skill:n,Health:o}=s;e.exports={"Healing Hymn":n,"Ode to Recovery":o}},9780:(e,t,a)=>{const{types:s}=a(3307);const{Damage:n,Health:o}=s;e.exports={[`Dancer's Touch`]:n,"Dance of Hope":o,"Divine Blessing":o}},9860:(e,t,a)=>{const{types:s}=a(3307);const{Damage:n}=s;e.exports={[`Comet's Boon`]:n,"Vicious Implosion":n}}},e=>{var t=t=>e(e.s=t);e.O(0,[121],()=>t(1440));var a=e.O()}]);