(self["webpackChunkarcheage_parser"]=self["webpackChunkarcheage_parser"]||[]).push([[792],{866:(e,t,n)=>{const{types:a}=n(3307);const{Damage:s}=a;e.exports={"Earthen Grip":s,Enervate:s,[`Dahuta's Breath`]:s,"Focal Concussion":s}},1340:(e,t,n)=>{const{types:a}=n(3307);const{Damage:s,Health:o,Taken:r,Received:c,Recovery:l,Misc:i}=a;const m={[s]:"#ff0000",[o]:"#008000",[r]:"#0000ff",[c]:"#90ee90",[l]:"#800080",[i]:"#000000"};const p=e=>m[e]??m[i];e.exports={colors:m,getColor:p}},1440:(e,t,n)=>{"use strict";var a=n(6540);var s=n(5338);var o=n(3048);var r=n(1680);var c=n(4805);var l=n(1511);var i=n(3307);const{Overview:m}=i.types;const p=(0,l.v)(e=>({displayType:m,setDisplayType:t=>e(()=>({displayType:t}))}));const u=p;const{Overview:g,Damage:f,Health:d,Taken:h,Received:y,Recovery:v}=i.types;const x=[g,f,d,h,y,v];function E(){const e=u(e=>e.displayType);const t=u(e=>e.setDisplayType);return a.createElement(r.A,{expand:"lg",className:"bg-body-tertiary"},a.createElement(o.A,{fluid:true},a.createElement(r.A.Brand,{style:{fontVariant:"small-caps"}},"Archeage Combat Log Parser"),a.createElement(c.A,{align:"end"},a.createElement(c.A.Toggle,{variant:"primary",id:"dropdown-basic"},"Display"),a.createElement(c.A.Menu,null,x.map(n=>a.createElement(c.A.Item,{key:n,active:e===n,onClick:()=>t(n)},(0,i.getTypeName)(n)))))))}var b=n(6386);const k=(0,l.v)(e=>({statistics:null,isProcessing:false,setStatistics:(t={})=>e(()=>({statistics:t,isProcessing:false})),clearStatistics:(t=false,n=null)=>e({statistics:n,isProcessing:t})}));const T=k;var w=n(1821);var D=n.n(w);const A={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:2,borderColor:"#eeeeee",borderStyle:"dashed",backgroundColor:"#fafafa",color:"#bdbdbd",outline:"none",transition:"border .24s ease-in-out"};const S={borderColor:"#2196f3"};const R={borderColor:"#00e676"};const C={borderColor:"#ff1744"};const M=true;function H(){const{setStatistics:e,clearStatistics:t}=T();const n=(0,a.useCallback)(async n=>{if(n.length!==1){return}const a=n.at(0);const s=a.stream();try{t(M,{});await new Promise(e=>setTimeout(e,1));const n=new(D())(s);await n.parseData();const a=n.getData();e(a)}catch(e){t(!M);console.debug("Processing error");console.trace(e)}},[]);const{getRootProps:s,getInputProps:r,isFocused:c,isDragAccept:l,isDragReject:i}=(0,b.VB)({onDrop:n});const m=(0,a.useMemo)(()=>({...A,...c?S:{},...l?R:{},...i?C:{}}),[c,l,i]);return a.createElement(o.A,{className:"d-flex flex-column flex-grow-1 justify-content-center pt-5 pb-5"},a.createElement("div",s({style:m}),a.createElement("input",r()),a.createElement("p",null,"Drag 'n' drop a combat log here, or click to select the file")))}var B=n(778);var N=n(4479);var O=n(1105);var P=n(7721);var F=n(7843);var L=n(4228);var G=n(3434);var z=n(1446);var j=n(767);var I=n(3458);var W=n(3546);var V=n(4783);var $=n(4725);var _=n(4118);var q=n(1340);const J="#000";const X="#fff";const Y={top:40,left:150,right:40,bottom:40};const K={...$.k,minWidth:60,backgroundColor:"rgba(0,0,0, 0.75)",color:"white"};const Q="name";const U=e=>e[Q];function Z({data:e,type:t,title:n}){const s=Object.keys(e.at(0)??{}).filter(e=>e!==Q);const o=(0,a.useMemo)(()=>e.reduce((e,t)=>{const n=s.reduce((e,n)=>{e+=Number(t[n]);return e},0);e.push(n);return e},[]),[e]);const r=(0,a.useMemo)(()=>(0,I.A)({domain:e.map(U),padding:.2}),[e]);const c=(0,a.useMemo)(()=>(0,W.A)({domain:[0,Math.max(...o)],nice:true}),[e]);const l=(0,a.useMemo)(()=>(0,V.A)({domain:s,range:[(0,q.getColor)(t)]}),[e]);const{margin:m=Y,tooltipOpen:p,tooltipLeft:u,tooltipTop:g,tooltipData:f,hideTooltip:d,showTooltip:h}=(0,_.A)();const{parentRef:y,width:v,height:x}=(0,P.A)({debounceTime:150});const E=v-m.left-m.right;const b=x-m.top-m.bottom;c.rangeRound([0,E]);r.rangeRound([b,0]);return a.createElement("div",{ref:y,className:"d-flex flex-column flex-grow-1 p-0 mt-3 mb-3"},a.createElement("svg",{width:v,height:x},a.createElement("rect",{width:v,height:x,fill:X,rx:14}),a.createElement(F.A,{verticalAnchor:"start"},n),a.createElement(G.A,{top:m.top,left:m.left},a.createElement(L.A,{data:e,keys:s,height:b,y:U,yScale:r,xScale:c,color:l},e=>e.map(e=>e.bars.map(t=>a.createElement("rect",{key:`barstack-horizontal-${e.index}-${t.index}`,x:t.x,y:t.y,width:t.width,height:t.height,fill:t.color,onMouseLeave:()=>{d()},onMouseMove:e=>{h({tooltipData:t,tooltipTop:e?.nativeEvent?.pageY??0,tooltipLeft:e?.nativeEvent?.pageX??0})}})))),a.createElement(z.A,{hideTicks:true,numTicks:e.length,scale:r,stroke:J,tickStroke:J,tickLabelProps:{fill:J,fontSize:11,textAnchor:"end",dy:"0.33em"}}),a.createElement(j.A,{numTicks:5,top:b,scale:c,stroke:J,tickStroke:J,tickLabelProps:{fill:J,fontSize:11,textAnchor:"middle"}}))),p&&f&&a.createElement($.A,{top:g,left:u,style:K},a.createElement("div",{style:{color:l(f.key)}},a.createElement("strong",null,(0,i.getTypeName)(f.key))),a.createElement("div",null,f.bar.data[f.key]),a.createElement("div",null,a.createElement("small",null,U(f.bar.data)))))}const{Overview:ee,Damage:te,Health:ne,Taken:ae,Received:se,Recovery:oe}=i.types;function re(){const e=u(e=>e.displayType);const t=T(e=>e.statistics);const n=T(e=>e.isProcessing);if(n){return a.createElement("div",{className:"pt-5 pb-5 text-center"},a.createElement(B.A,{animation:"border",role:"status"},a.createElement("span",{className:"visually-hidden"},"Processing...")))}if(e===ee){return a.createElement(o.A,{fluid:true,className:"d-flex flex-column flex-grow-1"},a.createElement(N.A,{className:"flex-row flex-grow-1"},a.createElement(O.A,{className:"d-flex flex-column flex-grow-1"},a.createElement(Z,{data:t[te].slice(0,20),type:te,title:(0,i.getTypeName)(te)})),a.createElement(O.A,{className:"d-flex flex-column flex-grow-1"},a.createElement(Z,{data:t[ne].slice(0,20),type:ne,title:(0,i.getTypeName)(ne)})),a.createElement(O.A,{className:"d-flex flex-column flex-grow-1"},a.createElement(Z,{data:t[ae].slice(0,20),type:ae,title:(0,i.getTypeName)(ae)}))),a.createElement(N.A,{className:"flex-row flex-grow-1"},a.createElement(O.A,{className:"d-flex flex-column flex-grow-1"},a.createElement(Z,{data:t[se].slice(0,20),type:se,title:(0,i.getTypeName)(se)})),a.createElement(O.A,{className:"d-flex flex-column flex-grow-1"},a.createElement(Z,{data:t[oe].slice(0,20),type:oe,title:(0,i.getTypeName)(oe)})),a.createElement(O.A,{className:"d-flex flex-column flex-grow-1"},"Â ")))}return a.createElement(Z,{data:t[e].slice(0,50),type:e,title:(0,i.getTypeName)(e)})}function ce(){const e=T(e=>e.statistics);return a.createElement(a.Fragment,null,a.createElement(E,null),a.createElement(o.A,{fluid:true,className:"d-flex flex-column flex-grow-1"},e?a.createElement(re,{data:e}):a.createElement(H,null)))}function le(){return a.createElement(ce,null)}const ie=(0,s.H)(document.getElementById("react-app"));ie.render(a.createElement(le,null))},1591:(e,t,n)=>{const{types:a}=n(3307);const s=n(1599);const o=n(9860);const r=n(6934);const c=n(5629);const l=n(8145);const i=n(9413);const m=n(7492);const p=n(1600);const u=n(4026);const g=n(4039);const f=n(9752);const d=n(7932);const h=n(9780);const y=n(7694);const v=n(7700);const x=n(866);const{Damage:E,Health:b,Mana:k,Recovery:T,Misc:w}=a;const D={...s,...o,...r,...c,...l,...i,...m,...p,...u,...g,...f,...d,...h,...y,...v,...x};const A={"[Dance] Dance of Hope":"Dance of Hope","[Perform] Ode to Recovery":"Ode to Recovery","Bleeding (Rank 1)":"Bleeding"};const S=e=>{const[,t,...n]=e.slice(1).split("|");if(!t){return null}const a={name:t.slice(8),type:w,target:null,action:null,amount:0};const s=n.join("|");const o=s.indexOf("cff9be85a");if(o!==-1){const e=s.indexOf("|",o);a.amount=Number(s.slice(o+9,e))}else{const e=s.indexOf("cffc13d36");if(e!==-1){const t=s.indexOf("|",e);a.amount=Number(s.slice(e+10,t))}}const r=s.indexOf("cff57d6ae");if(r!==-1){const e=s.indexOf("|",r);a.action=s.slice(r+9,e)}const c=s.includes("r attacked")?s.indexOf("r attacked"):s.indexOf("r targeted");if(c!==-1){const e=s.indexOf("|",c);a.target=s.slice(c+11,e)}a.type=D[a.action]||a.type;if(s.includes("r to restore")&&a.type!==T){a.type=s.endsWith("mana.")?k:b}else if(s.includes("r attacked")){a.type=E}a.action=A[a.action]||a.action;return a};e.exports={parseCombatEntry:S}},1599:(e,t,n)=>{const{types:a}=n(3307);const{Damage:s}=a;e.exports={"Endless Arrows":s,"Charged Bolt":s,"Fending Arrow":s,"Blazing Arrow":s,"Concussive Arrow":s,"Missile Rain":s,Snipe:s}},1600:(e,t,n)=>{const{types:a}=n(3307);const{Damage:s}=a;e.exports={"Crippling Mire":s,"Absorb Lifeforce":s,"Cursed Thorns":s,Boneyard:s,"Crow Attack":s,"Hell Spear":s,[`Death's Vengeance`]:s}},1821:(e,t,n)=>{const a=n(3539);const{parseCombatEntry:s}=n(1591);const{types:o,reverseTypes:r}=n(3307);const{Damage:c,Health:l,Mana:i,Taken:m,Received:p,Recovery:u,Buff:g,Debuff:f,Movement:d,Skill:h,Misc:y}=o;class v{#e;#t=[];#n=new Map;constructor(e){this.#e=e}async parseData(){const e=this.#e.pipeThrough(new TextDecoderStream).pipeThrough(new a);for await(const t of e){const e=s(t);if(!e){continue}this.#t.push(e);const{name:n,type:a,action:o,amount:c,target:l}=e;if(a===y){continue}const i=this.#a(n);if(i){i[a][o]=(i[a][o]??0)+c}const m=r[a];if(m){const e=this.#a(l);if(e){e[m][o]=(e[m][o]??0)+c}}}return Array.from(this.#n.values())}#a(e){if(!e||e.includes(" ")){return}if(!this.#n.has(e)){this.#n.set(e,v.createMemo(e))}return this.#n.get(e)}getType(e,t){const n=Array.from(this.#n.values()).sort((t,n)=>v.sumAmount(n,e)-v.sumAmount(t,e));return n.slice(0,t).map(t=>({name:t.name,[e]:v.sumAmount(t,e)}))}getData(e=Infinity){return{[c]:this.getType(c,e),[l]:this.getType(l,e),[i]:this.getType(i,e),[m]:this.getType(m,e),[p]:this.getType(p,e),[u]:this.getType(u,e),[g]:this.getType(g,e),[f]:this.getType(f,e),[d]:this.getType(d,e),[h]:this.getType(h,e),[y]:this.getType(y,e)}}static createMemo(e){return{name:e,[c]:{},[l]:{},[i]:{},[m]:{},[p]:{},[u]:{},[g]:{},[f]:{},[d]:{},[h]:{}}}static sumAmount(e,t){return Object.values(e[t]??{}).reduce((e,t)=>e+t,0)}}e.exports=v},3307:e=>{const t="overview";const n="damage";const a="health";const s="mana";const o="taken";const r="received";const c="recovery";const l="buff";const i="debuff";const m="movement";const p="skill";const u="misc";const g={Overview:t,Damage:n,Health:a,Mana:s,Taken:o,Received:r,Recovery:c,Buff:l,Debuff:i,Movement:m,Skill:p,Misc:u};const f={[t]:"Overview",[n]:"Damage",[a]:"Healing",[s]:"Mana",[o]:"Damage Taken",[r]:"Healing Received",[c]:"Self Recovery",[l]:"Buffs",[i]:"Debuff",[m]:"Movement",[p]:"Skill",[u]:"Miscellaneous"};const d={[n]:o,[a]:r};const h=e=>f[e]??f[u];e.exports={types:g,reverseTypes:d,getTypeName:h,Overview:t}},3539:e=>{const t="\n";const n=t.length;const a={async transform(e,a){e=await e;let s=this.buffers.slice();let o=0;for(;;){const r=e.indexOf(t,o);if(r===-1){this.buffers.push(r>0?e.slice(r):e);return}const c=s.length?s.join(""):"";if(c){s=[];this.buffers=s}a.enqueue(c+e.slice(o,r));o=r+n}}};class s extends TransformStream{constructor(){super({...a,buffers:[]})}}e.exports=s},4026:(e,t,n)=>{const{types:a}=n(3307);const{Recovery:s}=a;e.exports={"Healing Potion":s,"Minor Healing Potion":s,"Health Regen Food":s,"Earth Lunafrost":s,[`Judge's Longing`]:s,"Found Wild Ginseng!":s,"Absorb Damage":s,"Revitalizing Cheer":s,"Sand Soulshard":s,[`Healer's Chalice`]:s,[`Orange Goblet of Honor (Rank 1)`]:s,[`Orange Goblet of Honor (Rank 2)`]:s,[`Orange Goblet of Honor (Rank 3)`]:s,"Conversion Shield":s,"Flame Conversion Shield (Rank 5)":s,"Golden Dawn":s}},4039:(e,t,n)=>{const{types:a}=n(3307);const{Damage:s}=a;e.exports={"Rapid Strike":s,Poisoned:s,"Pin Down":s,"Bleeding (Rank 1)":s,Overwhelm:s,Wallop:s,Shadowsmite:s,"Throw Dagger":s}},5629:(e,t,n)=>{const{types:a}=n(3307);const{Damage:s}=a;e.exports={"Shield Slam":s,"Bull Rush":s,"Boastful Roar":s,Retribution:s}},6934:(e,t,n)=>{const{types:a}=n(3307);const{Damage:s}=a;e.exports={"Triple Slash":s,Charge:s,"Sunder Earth":s,"Precision Strike":s,"Tiger Strike":s,"Hammer Toss":s,"Behind Enemy Lines":s}},7492:(e,t,n)=>{const{types:a}=n(3307);const{Damage:s}=a;e.exports={"Mana Bolts":s,"Crashing Wave":s,"Serpent Bite":s,"Soulbound Edge":s,"Ghastly Pack":s,"Ring Throw":s,Bladefall:s}},7694:(e,t,n)=>{const{types:a}=n(3307);const{Damage:s}=a;e.exports={"Blade Flurry":s,"Crescent Slice":s,"Sinister Strike":s,"Relentless Assault":s,Entangle:s,Bladeblast:s,"Twin Shadow Slash":s}},7700:(e,t,n)=>{const{types:a}=n(3307);const{Damage:s,Health:o,Skill:r}=a;e.exports={Antithesis:s,Resurgence:o,"Life Skewer":o,Mend:o,"Fervent Healing":o,"Gradual Recovery":o,"Healing Circle":o,Revive:r,"Mana Barrier":r}},7932:(e,t,n)=>{const{types:a}=n(3307);const{Damage:s}=a;e.exports={Flamebolt:s,"Freezing Arrow":s,"Arc Lightning":s,"Electric Shock":s,"Freezing Earth":s,"Flame Barrier":s,"Chain Lightning":s,"Searing Rain":s,"Meteor Strike":s}},8145:(e,t,n)=>{const{types:a}=n(3307);const{Damage:s}=a;e.exports={"Ceaseless Fire":s,"Corrosive Barrage":s,Backdraft:s,"Splinter Shell":s,"Blight Bolt":s,"Vicious Rebuke":s,"Trigger Happy":s,"Collateral Damage":s}},9413:(e,t,n)=>{const{types:a}=n(3307);const{Health:s}=a;e.exports={"Healing Talisman":s,[`Black Dragon's Serenity`]:s}},9752:(e,t,n)=>{const{types:a}=n(3307);const{Skill:s,Health:o}=a;e.exports={"Healing Hymn":s,"[Perform] Ode to Recovery":o}},9780:(e,t,n)=>{const{types:a}=n(3307);const{Damage:s,Health:o}=a;e.exports={[`Dancer's Touch`]:s,"[Dance] Dance of Hope":o,"Divine Blessing":o}},9860:(e,t,n)=>{const{types:a}=n(3307);const{Damage:s}=a;e.exports={[`Comet's Boon`]:s,"Vicious Implosion":s}}},e=>{var t=t=>e(e.s=t);e.O(0,[121],()=>t(1440));var n=e.O()}]);