(self["webpackChunkarcheage_parser"]=self["webpackChunkarcheage_parser"]||[]).push([[792],{866:(e,t,a)=>{const{types:s}=a(3307);const{Damage:n}=s;e.exports={"Earthen Grip":n,Enervate:n,[`Dahuta's Breath`]:n,"Focal Concussion":n}},1340:(e,t,a)=>{const{types:s}=a(3307);const{Damage:n,Health:o,Taken:r,Received:c,Recovery:l,Misc:i}=s;const m={[n]:"#ff0000",[o]:"#008000",[r]:"#0000ff",[c]:"#90ee90",[l]:"#800080",[i]:"#000000"};const u=e=>m[e]??m[i];e.exports={colors:m,getColor:u}},1440:(e,t,a)=>{"use strict";var s=a(6540);var n=a(5338);var o=a(3048);var r=a(1680);var c=a(4805);var l=a(1376);var i=a(1511);var m=a(3307);const{Overview:u}=m.types;const f=(0,i.v)(e=>({displayType:u,setDisplayType:t=>e(()=>({displayType:t})),focusName:"",setFocusName:({target:t})=>e(()=>({focusName:t.value}))}));const p=f;const{Overview:g,Damage:d,Health:y,Taken:h,Received:x,Recovery:v}=m.types;const E=[g,d,y,h,x,v];function w(){const e=p(e=>e.displayType);const t=p(e=>e.setDisplayType);const a=p(e=>e.focusName);const n=p(e=>e.setFocusName);return s.createElement(r.A,{expand:"lg",className:"bg-body-tertiary"},s.createElement(o.A,{fluid:true},s.createElement(r.A.Brand,{style:{fontVariant:"small-caps"}},"Archeage Combat Log Parser"),s.createElement("div",{className:"d-flex flex-row"},s.createElement(l.A.Group,{className:"me-2"},s.createElement(l.A.Control,{type:"text",placeholder:"Focus Name",value:a,onInput:n})),s.createElement(c.A,{align:"end"},s.createElement(c.A.Toggle,{variant:"primary",id:"dropdown-basic"},"Display"),s.createElement(c.A.Menu,null,E.map(a=>s.createElement(c.A.Item,{key:a,active:e===a,onClick:()=>t(a)},(0,m.getTypeName)(a))))))))}var b=a(6386);const T=(0,i.v)(e=>({statistics:null,isProcessing:false,setStatistics:(t={})=>e(()=>({statistics:t,isProcessing:false})),clearStatistics:(t=false,a=null)=>e({statistics:a,isProcessing:t})}));const A=T;var k=a(1821);var N=a.n(k);const S={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:2,borderColor:"#eeeeee",borderStyle:"dashed",backgroundColor:"#fafafa",color:"#bdbdbd",outline:"none",transition:"border .24s ease-in-out"};const D={borderColor:"#2196f3"};const R={borderColor:"#00e676"};const C={borderColor:"#ff1744"};const M=true;function B(){const{setStatistics:e,clearStatistics:t}=A();const a=(0,s.useCallback)(async a=>{if(a.length!==1){return}const s=a.at(0);const n=s.stream();try{t(M,{});await new Promise(e=>setTimeout(e,42));const a=new(N())(n);await a.parseData();e(a)}catch(e){t(!M);console.debug("Processing error");console.trace(e)}},[]);const{getRootProps:n,getInputProps:r,isFocused:c,isDragAccept:l,isDragReject:i}=(0,b.VB)({onDrop:a});const m=(0,s.useMemo)(()=>({...S,...c?D:{},...l?R:{},...i?C:{}}),[c,l,i]);return s.createElement(o.A,{className:"d-flex flex-column flex-grow-1 justify-content-center pt-5 pb-5"},s.createElement("div",n({style:m}),s.createElement("input",r()),s.createElement("p",null,"Drag 'n' drop a combat log here, or click to select the file")))}var H=a(778);var O=a(4479);var F=a(1105);var P=a(7721);var L=a(7843);var j=a(4228);var z=a(3434);var G=a(1446);var I=a(767);var W=a(3458);var V=a(3546);var J=a(4783);var $=a(4725);var _=a(4118);var q=a(1340);const X="#000";const Y="#fff";const K={top:40,left:150,right:40,bottom:40};const Q={...$.k,minWidth:60,backgroundColor:"rgba(0,0,0, 0.75)",color:"white"};const U="name";const Z=e=>e[U];function ee({data:e,type:t,title:a}){const n=Object.keys(e.at(0)??{}).filter(e=>e!==U);const o=(0,s.useMemo)(()=>e.reduce((e,t)=>{const a=n.reduce((e,a)=>{e+=Number(t[a]);return e},0);e.push(a);return e},[]),[e]);const r=(0,s.useMemo)(()=>(0,W.A)({domain:e.map(Z),padding:.2}),[e]);const c=(0,s.useMemo)(()=>(0,V.A)({domain:[0,Math.max(...o)],nice:true}),[e]);const l=(0,s.useMemo)(()=>(0,J.A)({domain:n,range:[(0,q.getColor)(t)]}),[e]);const{margin:i=K,tooltipOpen:u,tooltipLeft:f,tooltipTop:p,tooltipData:g,hideTooltip:d,showTooltip:y}=(0,_.A)();const{parentRef:h,width:x,height:v}=(0,P.A)({debounceTime:150});const E=x-i.left-i.right;const w=v-i.top-i.bottom;c.rangeRound([0,E]);r.rangeRound([w,0]);return s.createElement("div",{ref:h,className:"d-flex flex-column flex-grow-1 p-0 mt-3 mb-3"},s.createElement("svg",{width:x,height:v},s.createElement("rect",{width:x,height:v,fill:Y,rx:14}),s.createElement(L.A,{verticalAnchor:"start"},a),s.createElement(z.A,{top:i.top,left:i.left},s.createElement(j.A,{data:e,keys:n,height:w,y:Z,yScale:r,xScale:c,color:l},e=>e.map(e=>e.bars.map(t=>s.createElement("rect",{key:`barstack-horizontal-${e.index}-${t.index}`,x:t.x,y:t.y,width:t.width,height:t.height,fill:t.color,onMouseLeave:()=>{d()},onMouseMove:e=>{y({tooltipData:t,tooltipTop:e?.nativeEvent?.pageY??0,tooltipLeft:e?.nativeEvent?.pageX??0})}})))),s.createElement(G.A,{hideTicks:true,numTicks:e.length,scale:r,stroke:X,tickStroke:X,tickLabelProps:{fill:X,fontSize:11,textAnchor:"end",dy:"0.33em"}}),s.createElement(I.A,{numTicks:5,top:w,scale:c,stroke:X,tickStroke:X,tickLabelProps:{fill:X,fontSize:11,textAnchor:"middle"}}))),u&&g&&s.createElement($.A,{top:p,left:f,style:Q},s.createElement("div",{style:{color:l(g.key)}},s.createElement("strong",null,(0,m.getTypeName)(g.key))),s.createElement("div",null,g.bar.data[g.key]),s.createElement("div",null,s.createElement("small",null,Z(g.bar.data)))))}var te=a(7690);const{Overview:ae,Damage:se,Health:ne,Taken:oe,Received:re,Recovery:ce}=m.types;function le(){const e=p(e=>e.displayType);const t=p(e=>e.focusName);const a=A(e=>e.statistics);const n=A(e=>e.isProcessing);if(n){return s.createElement("div",{className:"pt-5 pb-5 text-center"},s.createElement(H.A,{animation:"border",role:"status"},s.createElement("span",{className:"visually-hidden"},"Processing...")))}const r=t?a.getName(t,false):undefined;if(r){return s.createElement(o.A,{fluid:true,className:"d-flex flex-column flex-grow-1"},s.createElement(O.A,{className:"flex-row flex-grow-1"},s.createElement(F.A,{className:"d-flex flex-column flex-grow-1"},s.createElement(ee,{data:(0,te.getFocus)(r[se],se).slice(0,20),type:se,title:(0,m.getTypeName)(se)})),s.createElement(F.A,{className:"d-flex flex-column flex-grow-1"},s.createElement(ee,{data:(0,te.getFocus)(r[ne],ne).slice(0,20),type:ne,title:(0,m.getTypeName)(ne)})),s.createElement(F.A,{className:"d-flex flex-column flex-grow-1"},s.createElement(ee,{data:(0,te.getFocus)(r[oe],oe).slice(0,20),type:oe,title:(0,m.getTypeName)(oe)}))),s.createElement(O.A,{className:"flex-row flex-grow-1"},s.createElement(F.A,{className:"d-flex flex-column flex-grow-1"},s.createElement(ee,{data:(0,te.getFocus)(r[re],re).slice(0,20),type:re,title:(0,m.getTypeName)(re)})),s.createElement(F.A,{className:"d-flex flex-column flex-grow-1"},s.createElement(ee,{data:(0,te.getFocus)(r[ce],ce).slice(0,20),type:ce,title:(0,m.getTypeName)(ce)})),s.createElement(F.A,{className:"d-flex flex-column flex-grow-1"},"Â ")))}const c=a.getData();if(e===ae){return s.createElement(o.A,{fluid:true,className:"d-flex flex-column flex-grow-1"},s.createElement(O.A,{className:"flex-row flex-grow-1"},s.createElement(F.A,{className:"d-flex flex-column flex-grow-1"},s.createElement(ee,{data:c[se].slice(0,20),type:se,title:(0,m.getTypeName)(se)})),s.createElement(F.A,{className:"d-flex flex-column flex-grow-1"},s.createElement(ee,{data:c[ne].slice(0,20),type:ne,title:(0,m.getTypeName)(ne)})),s.createElement(F.A,{className:"d-flex flex-column flex-grow-1"},s.createElement(ee,{data:c[oe].slice(0,20),type:oe,title:(0,m.getTypeName)(oe)}))),s.createElement(O.A,{className:"flex-row flex-grow-1"},s.createElement(F.A,{className:"d-flex flex-column flex-grow-1"},s.createElement(ee,{data:c[re].slice(0,20),type:re,title:(0,m.getTypeName)(re)})),s.createElement(F.A,{className:"d-flex flex-column flex-grow-1"},s.createElement(ee,{data:c[ce].slice(0,20),type:ce,title:(0,m.getTypeName)(ce)})),s.createElement(F.A,{className:"d-flex flex-column flex-grow-1"},"Â ")))}return s.createElement(ee,{data:c[e].slice(0,50),type:e,title:(0,m.getTypeName)(e)})}function ie(){const e=A(e=>e.statistics);return s.createElement(s.Fragment,null,s.createElement(w,null),s.createElement(o.A,{fluid:true,className:"d-flex flex-column flex-grow-1"},e?s.createElement(le,{data:e}):s.createElement(B,null)))}function me(){return s.createElement(ie,null)}const ue=(0,n.H)(document.getElementById("react-app"));ue.render(s.createElement(me,null))},1591:(e,t,a)=>{const{types:s}=a(3307);const n=a(1599);const o=a(9860);const r=a(6934);const c=a(5629);const l=a(8145);const i=a(9413);const m=a(7492);const u=a(1600);const f=a(4026);const p=a(4039);const g=a(9752);const d=a(7932);const y=a(9780);const h=a(7694);const x=a(7700);const v=a(866);const{Damage:E,Health:w,Mana:b,Recovery:T,Misc:A}=s;const k={...n,...o,...r,...c,...l,...i,...m,...u,...f,...p,...g,...d,...y,...h,...x,...v};const N=e=>{const[,t,...a]=e.trim().slice(1).split("|");if(!t){return null}const s={name:t.slice(8),type:A,target:null,action:null,amount:0};const n=a.join("|");const o=n.indexOf("cff9be85a");if(o!==-1){const e=n.indexOf("|",o);s.amount=Number(n.slice(o+9,e))}else{const e=n.indexOf("cffc13d36");if(e!==-1){const t=n.indexOf("|",e);s.amount=Number(n.slice(e+10,t))}}const r=n.indexOf("cff57d6ae");if(r!==-1){const e=n.indexOf("|",r);s.action=n.slice(r+9,e)}const c=n.includes("r attacked")?n.indexOf("r attacked"):n.indexOf("r targeted");if(c!==-1){const e=n.indexOf("|",c);s.target=n.slice(c+11,e)}s.action=s.action?.replace(/[[(][^\])]+[\])]/g,"").trim();s.type=k[s.action]||s.type;if(n.includes("r to restore")&&s.type!==T){s.type=n.endsWith("mana.")?b:w}else if(n.includes("r attacked")){s.type=E}return s};e.exports={parseCombatEntry:N}},1599:(e,t,a)=>{const{types:s}=a(3307);const{Damage:n}=s;e.exports={"Endless Arrows":n,"Charged Bolt":n,"Fending Arrow":n,"Blazing Arrow":n,"Concussive Arrow":n,"Missile Rain":n,Snipe:n}},1600:(e,t,a)=>{const{types:s}=a(3307);const{Damage:n,Recovery:o}=s;e.exports={"Crippling Mire":n,"Absorb Lifeforce":o,"Cursed Thorns":n,Boneyard:n,"Crow Attack":n,"Hell Spear":n,[`Death's Vengeance`]:n}},1821:(e,t,a)=>{const s=a(3539);const{parseCombatEntry:n}=a(1591);const{types:o,reverseTypes:r}=a(3307);const{Damage:c,Health:l,Mana:i,Taken:m,Received:u,Recovery:f,Buff:p,Debuff:g,Movement:d,Skill:y,Misc:h}=o;class x{#e;#t=[];#a=new Map;constructor(e){this.#e=e}async parseData(){const e=this.#e.pipeThrough(new TextDecoderStream).pipeThrough(new s);for await(const t of e){const e=n(t);if(!e){continue}this.#t.push(e);const{name:a,type:s,action:o,amount:c,target:l}=e;if(s===h){continue}const i=this.getName(a);if(i){i[s][o]=(i[s][o]??0)+c}const m=r[s];if(m){const e=this.getName(l);if(e){e[m][o]=(e[m][o]??0)+c}}}return Array.from(this.#a.values())}getName(e,t=true){if(!e||e.includes(" ")){return}const a=e.toLowerCase();if(!this.#a.has(a)){if(!t){return}this.#a.set(a,x.createMemo(e))}return this.#a.get(a)}getType(e,t){const a=Array.from(this.#a.values()).sort((t,a)=>x.sumAmount(a,e)-x.sumAmount(t,e));return a.slice(0,t).map(t=>({name:t.name,[e]:x.sumAmount(t,e)}))}getData(e=Infinity){return{[c]:this.getType(c,e),[l]:this.getType(l,e),[i]:this.getType(i,e),[m]:this.getType(m,e),[u]:this.getType(u,e),[f]:this.getType(f,e),[p]:this.getType(p,e),[g]:this.getType(g,e),[d]:this.getType(d,e),[y]:this.getType(y,e),[h]:this.getType(h,e)}}static createMemo(e){return{name:e,[c]:{},[l]:{},[i]:{},[m]:{},[u]:{},[f]:{},[p]:{},[g]:{},[d]:{},[y]:{}}}static sumAmount(e,t){return Object.values(e[t]??{}).reduce((e,t)=>e+t,0)}}e.exports=x},3307:e=>{const t="overview";const a="damage";const s="health";const n="mana";const o="taken";const r="received";const c="recovery";const l="buff";const i="debuff";const m="movement";const u="skill";const f="misc";const p={Overview:t,Damage:a,Health:s,Mana:n,Taken:o,Received:r,Recovery:c,Buff:l,Debuff:i,Movement:m,Skill:u,Misc:f};const g={[t]:"Overview",[a]:"Damage",[s]:"Healing",[n]:"Mana",[o]:"Damage Taken",[r]:"Healing Received",[c]:"Self Recovery",[l]:"Buffs",[i]:"Debuff",[m]:"Movement",[u]:"Skill",[f]:"Miscellaneous"};const d={[a]:o,[s]:r};const y=e=>g[e]??g[f];e.exports={types:p,reverseTypes:d,getTypeName:y,Overview:t}},3539:e=>{const t="\n";const a=t.length;const s={async transform(e,s){e=await e;let n=this.buffers.slice();let o=0;for(;;){const r=e.indexOf(t,o);if(r===-1){this.buffers.push(r>0?e.slice(r):e);return}const c=n.length?n.join(""):"";if(c){n=[];this.buffers=n}s.enqueue(c+e.slice(o,r));o=r+a}}};class n extends TransformStream{constructor(){super({...s,buffers:[]})}}e.exports=n},4026:(e,t,a)=>{const{types:s}=a(3307);const{Recovery:n,Mana:o}=s;e.exports={"Healing Potion":n,"Minor Healing Potion":n,"Mana Potion":o,"Minor Mana Potion":o,"Health Regen Food":n,"Earth Lunafrost":n,[`Judge's Longing`]:n,[`Enhanced Judge's Longing`]:n,"Found Wild Ginseng!":n,"Absorb Damage":n,"Revitalizing Cheer":n,"Sand Soulshard":n,"Wind Soulshard":n,"Lunar Soulshard":n,[`Healer's Chalice`]:n,"Orange Goblet of Honor":n,"Conversion Shield":n,"Flame Conversion Shield":n,"Golden Dawn":n}},4039:(e,t,a)=>{const{types:s}=a(3307);const{Damage:n}=s;e.exports={"Rapid Strike":n,Poisoned:n,"Pin Down":n,"Bleeding (Rank 1)":n,Overwhelm:n,Wallop:n,Shadowsmite:n,"Throw Dagger":n}},5629:(e,t,a)=>{const{types:s}=a(3307);const{Damage:n}=s;e.exports={"Shield Slam":n,"Bull Rush":n,"Boastful Roar":n,Retribution:n}},6934:(e,t,a)=>{const{types:s}=a(3307);const{Damage:n}=s;e.exports={"Triple Slash":n,Charge:n,"Sunder Earth":n,"Precision Strike":n,"Tiger Strike":n,"Hammer Toss":n,"Behind Enemy Lines":n}},7492:(e,t,a)=>{const{types:s}=a(3307);const{Damage:n}=s;e.exports={"Mana Bolts":n,"Crashing Wave":n,"Serpent Bite":n,"Soulbound Edge":n,"Ghastly Pack":n,"Ring Throw":n,Bladefall:n}},7690:e=>{const t=(e,t)=>Object.entries(e).map(([e,a])=>({name:e,[t]:a})).sort((e,a)=>a[t]-e[t]);e.exports={getFocus:t}},7694:(e,t,a)=>{const{types:s}=a(3307);const{Damage:n}=s;e.exports={"Blade Flurry":n,"Crescent Slice":n,"Sinister Strike":n,"Relentless Assault":n,Entangle:n,Bladeblast:n,"Twin Shadow Slash":n}},7700:(e,t,a)=>{const{types:s}=a(3307);const{Damage:n,Health:o,Skill:r}=s;e.exports={Antithesis:n,Resurgence:o,"Life Skewer":o,Mend:o,"Fervent Healing":o,"Gradual Recovery":o,"Healing Circle":o,Revive:r,"Mana Barrier":r}},7932:(e,t,a)=>{const{types:s}=a(3307);const{Damage:n}=s;e.exports={Flamebolt:n,"Freezing Arrow":n,"Arc Lightning":n,"Electric Shock":n,"Freezing Earth":n,"Flame Barrier":n,"Chain Lightning":n,"Searing Rain":n,"Meteor Strike":n}},8145:(e,t,a)=>{const{types:s}=a(3307);const{Damage:n}=s;e.exports={"Ceaseless Fire":n,"Corrosive Barrage":n,Backdraft:n,"Splinter Shell":n,"Blight Bolt":n,"Vicious Rebuke":n,"Trigger Happy":n,"Collateral Damage":n}},9413:(e,t,a)=>{const{types:s}=a(3307);const{Health:n}=s;e.exports={"Healing Talisman":n,[`Black Dragon's Serenity`]:n}},9752:(e,t,a)=>{const{types:s}=a(3307);const{Skill:n,Health:o}=s;e.exports={"Healing Hymn":n,"[Perform] Ode to Recovery":o}},9780:(e,t,a)=>{const{types:s}=a(3307);const{Damage:n,Health:o}=s;e.exports={[`Dancer's Touch`]:n,"[Dance] Dance of Hope":o,"Divine Blessing":o}},9860:(e,t,a)=>{const{types:s}=a(3307);const{Damage:n}=s;e.exports={[`Comet's Boon`]:n,"Vicious Implosion":n}}},e=>{var t=t=>e(e.s=t);e.O(0,[121],()=>t(1440));var a=e.O()}]);