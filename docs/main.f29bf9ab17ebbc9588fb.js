(self["webpackChunkarcheage_parser"]=self["webpackChunkarcheage_parser"]||[]).push([[792],{866:(e,t,n)=>{const{types:s}=n(3307);const{Damage:a}=s;e.exports={"Earthen Grip":a,Enervate:a,[`Dahuta's Breath`]:a,"Focal Concussion":a}},1340:(e,t,n)=>{const{types:s}=n(3307);const{Damage:a,Health:o,Taken:r,Received:c,Recovery:l,Misc:i}=s;const m={[a]:"#ff0000",[o]:"#008000",[r]:"#0000ff",[c]:"#90ee90",[l]:"#800080",[i]:"#000000"};const p=e=>m[e]??m[i];e.exports={colors:m,getColor:p}},1440:(e,t,n)=>{"use strict";var s=n(6540);var a=n(5338);var o=n(3048);var r=n(1680);var c=n(4805);var l=n(1511);var i=n(3307);const{Overview:m}=i.types;const p=(0,l.v)(e=>({displayType:m,setDisplayType:t=>e(()=>({displayType:t}))}));const u=p;const{Overview:f,Damage:g,Health:d,Taken:h,Received:y,Recovery:v}=i.types;const x=[f,g,d,h,y,v];function b(){const e=u(e=>e.displayType);const t=u(e=>e.setDisplayType);return s.createElement(r.A,{expand:"lg",className:"bg-body-tertiary"},s.createElement(o.A,{fluid:true},s.createElement(r.A.Brand,{style:{fontVariant:"small-caps"}},"Archeage Combat Log Parser"),s.createElement(c.A,{align:"end"},s.createElement(c.A.Toggle,{variant:"primary",id:"dropdown-basic"},"Display"),s.createElement(c.A.Menu,null,x.map(n=>s.createElement(c.A.Item,{key:n,active:e===n,onClick:()=>t(n)},(0,i.getTypeName)(n)))))))}var E=n(6386);const k=(0,l.v)(e=>({statistics:null,isProcessing:false,setStatistics:(t={})=>e(()=>({statistics:t,isProcessing:false})),clearStatistics:(t=false,n=null)=>e({statistics:n,isProcessing:t})}));const w=k;var D=n(1821);var T=n.n(D);const A={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:2,borderColor:"#eeeeee",borderStyle:"dashed",backgroundColor:"#fafafa",color:"#bdbdbd",outline:"none",transition:"border .24s ease-in-out"};const S={borderColor:"#2196f3"};const R={borderColor:"#00e676"};const C={borderColor:"#ff1744"};const H=true;function M(){const{setStatistics:e,clearStatistics:t}=w();const n=(0,s.useCallback)(async n=>{if(n.length!==1){return}const s=n.at(0);const a=s.stream();try{t(H,{});await new Promise(e=>setTimeout(e,1));const n=new(T())(a);await n.parseData();const s=n.getData();e(s)}catch(e){t(!H);console.debug("Processing error");console.trace(e)}},[]);const{getRootProps:a,getInputProps:r,isFocused:c,isDragAccept:l,isDragReject:i}=(0,E.VB)({onDrop:n});const m=(0,s.useMemo)(()=>({...A,...c?S:{},...l?R:{},...i?C:{}}),[c,l,i]);return s.createElement(o.A,{className:"d-flex flex-column flex-grow-1 justify-content-center pt-5 pb-5"},s.createElement("div",a({style:m}),s.createElement("input",r()),s.createElement("p",null,"Drag 'n' drop a combat log here, or click to select the file")))}var B=n(778);var O=n(4479);var N=n(1105);var P=n(7721);var F=n(4228);var L=n(3434);var G=n(1446);var z=n(767);var j=n(3458);var I=n(3546);var W=n(4783);var V=n(4725);var $=n(4118);var _=n(1340);const q="#000";const J="#fff";const X={top:40,left:150,right:40,bottom:40};const Y={...V.k,minWidth:60,backgroundColor:"rgba(0,0,0, 0.75)",color:"white"};const K="name";const Q=e=>e[K];function U({data:e,type:t}){const n=Object.keys(e.at(0)).filter(e=>e!==K);const a=(0,s.useMemo)(()=>e.reduce((e,t)=>{const s=n.reduce((e,n)=>{e+=Number(t[n]);return e},0);e.push(s);return e},[]),[e]);const o=(0,s.useMemo)(()=>(0,j.A)({domain:e.map(Q),padding:.2}),[e]);const r=(0,s.useMemo)(()=>(0,I.A)({domain:[0,Math.max(...a)],nice:true}),[e]);const c=(0,s.useMemo)(()=>(0,W.A)({domain:n,range:[(0,_.getColor)(t)]}),[e]);const{margin:l=X,tooltipOpen:m,tooltipLeft:p,tooltipTop:u,tooltipData:f,hideTooltip:g,showTooltip:d}=(0,$.A)();const{parentRef:h,width:y,height:v}=(0,P.A)({debounceTime:150});const x=y-l.left-l.right;const b=v-l.top-l.bottom;r.rangeRound([0,x]);o.rangeRound([b,0]);return s.createElement("div",{ref:h,className:"d-flex flex-column flex-grow-1 p-0 mt-3 mb-3"},s.createElement("svg",{width:y,height:v},s.createElement("rect",{width:y,height:v,fill:J,rx:14}),s.createElement(L.A,{top:l.top,left:l.left},s.createElement(F.A,{data:e,keys:n,height:b,y:Q,yScale:o,xScale:r,color:c},e=>e.map(e=>e.bars.map(t=>s.createElement("rect",{key:`barstack-horizontal-${e.index}-${t.index}`,x:t.x,y:t.y,width:t.width,height:t.height,fill:t.color,onMouseLeave:()=>{g()},onMouseMove:e=>{d({tooltipData:t,tooltipTop:e?.nativeEvent?.pageY??0,tooltipLeft:e?.nativeEvent?.pageX??0})}})))),s.createElement(G.A,{hideTicks:true,numTicks:e.length,scale:o,stroke:q,tickStroke:q,tickLabelProps:{fill:q,fontSize:11,textAnchor:"end",dy:"0.33em"}}),s.createElement(z.A,{numTicks:5,top:b,scale:r,stroke:q,tickStroke:q,tickLabelProps:{fill:q,fontSize:11,textAnchor:"middle"}}))),m&&f&&s.createElement(V.A,{top:u,left:p,style:Y},s.createElement("div",{style:{color:c(f.key)}},s.createElement("strong",null,(0,i.getTypeName)(f.key))),s.createElement("div",null,f.bar.data[f.key]),s.createElement("div",null,s.createElement("small",null,Q(f.bar.data)))))}const{Overview:Z,Damage:ee,Health:te,Taken:ne,Received:se,Recovery:ae}=i.types;function oe(){const e=u(e=>e.displayType);const t=w(e=>e.statistics);const n=w(e=>e.isProcessing);if(n){return s.createElement("div",{className:"pt-5 pb-5 text-center"},s.createElement(B.A,{animation:"border",role:"status"},s.createElement("span",{className:"visually-hidden"},"Processing...")))}if(e===Z){return s.createElement(o.A,{fluid:true,className:"d-flex flex-column flex-grow-1"},s.createElement(O.A,{className:"flex-row flex-grow-1"},s.createElement(N.A,{className:"d-flex flex-column flex-grow-1"},s.createElement(U,{data:t[ee].slice(0,20),type:ee})),s.createElement(N.A,{className:"d-flex flex-column flex-grow-1"},s.createElement(U,{data:t[te].slice(0,20),type:te})),s.createElement(N.A,{className:"d-flex flex-column flex-grow-1"},s.createElement(U,{data:t[ne].slice(0,20),type:ne}))),s.createElement(O.A,{className:"flex-row flex-grow-1"},s.createElement(N.A,{className:"d-flex flex-column flex-grow-1"},s.createElement(U,{data:t[se].slice(0,20),type:se})),s.createElement(N.A,{className:"d-flex flex-column flex-grow-1"},s.createElement(U,{data:t[ae].slice(0,20),type:ae})),s.createElement(N.A,{className:"d-flex flex-column flex-grow-1"},"Â ")))}return s.createElement(U,{data:t[e].slice(0,50),type:e})}function re(){const e=w(e=>e.statistics);return s.createElement(s.Fragment,null,s.createElement(b,null),s.createElement(o.A,{fluid:true,className:"d-flex flex-column flex-grow-1"},e?s.createElement(oe,{data:e}):s.createElement(M,null)))}function ce(){return s.createElement(re,null)}const le=(0,a.H)(document.getElementById("react-app"));le.render(s.createElement(ce,null))},1591:(e,t,n)=>{const{types:s}=n(3307);const a=n(1599);const o=n(9860);const r=n(6934);const c=n(5629);const l=n(8145);const i=n(9413);const m=n(7492);const p=n(1600);const u=n(4026);const f=n(4039);const g=n(9752);const d=n(7932);const h=n(9780);const y=n(7694);const v=n(7700);const x=n(866);const{Health:b,Mana:E,Recovery:k,Misc:w}=s;const D={...a,...o,...r,...c,...l,...i,...m,...p,...u,...f,...g,...d,...h,...y,...v,...x};const T={"[Dance] Dance of Hope":"Dance of Hope","[Perform] Ode to Recovery":"Ode to Recovery","Bleeding (Rank 1)":"Bleeding"};const A=e=>{const[,t,...n]=e.slice(1).split("|");if(!t){return null}const s={name:t.slice(8),type:w,target:null,action:null,amount:0};const a=n.join("|");const o=a.indexOf("cff9be85a");if(o!==-1){const e=a.indexOf("|",o);s.amount=Number(a.slice(o+9,e))}else{const e=a.indexOf("cffc13d36");if(e!==-1){const t=a.indexOf("|",e);s.amount=Number(a.slice(e+10,t))}}const r=a.indexOf("cff57d6ae");if(r!==-1){const e=a.indexOf("|",r);s.action=a.slice(r+9,e)}const c=a.includes("r attacked")?a.indexOf("r attacked"):a.indexOf("r targeted");if(c!==-1){const e=a.indexOf("|",c);s.target=a.slice(c+11,e)}s.type=D[s.action]||s.type;if(a.includes("r to restore")&&s.type!==k){s.type=a.endsWith("mana.")?E:b}s.action=T[s.action]||s.action;return s};e.exports={parseCombatEntry:A}},1599:(e,t,n)=>{const{types:s}=n(3307);const{Damage:a}=s;e.exports={"Endless Arrows":a,"Charged Bolt":a,"Fending Arrow":a,"Blazing Arrow":a,"Concussive Arrow":a,"Missile Rain":a,Snipe:a}},1600:(e,t,n)=>{const{types:s}=n(3307);const{Damage:a}=s;e.exports={"Crippling Mire":a,"Absorb Lifeforce":a,"Cursed Thorns":a,Boneyard:a,"Crow Attack":a,"Hell Spear":a,[`Death's Vengeance`]:a}},1821:(e,t,n)=>{const s=n(3539);const{parseCombatEntry:a}=n(1591);const{types:o,reverseTypes:r}=n(3307);const{Damage:c,Health:l,Mana:i,Taken:m,Received:p,Recovery:u,Buff:f,Debuff:g,Movement:d,Skill:h,Misc:y}=o;class v{#e;#t=[];#n=new Map;constructor(e){this.#e=e}async parseData(){const e=this.#e.pipeThrough(new TextDecoderStream).pipeThrough(new s);for await(const t of e){const e=a(t);if(!e){continue}this.#t.push(e);const{name:n,type:s,action:o,amount:c,target:l}=e;if(s===y){continue}const i=this.#s(n);i[s][o]=(i[s][o]??0)+c;const m=r[s];if(m){const e=this.#s(l);e[m][o]=(e[m][o]??0)+c}}return Array.from(this.#n.values())}#s(e){if(!this.#n.has(e)){this.#n.set(e,v.createMemo(e))}return this.#n.get(e)}getType(e,t){const n=Array.from(this.#n.values()).sort((t,n)=>v.sumAmount(n,e)-v.sumAmount(t,e));return n.slice(0,t).map(t=>({name:t.name,[e]:v.sumAmount(t,e)}))}getData(e=Infinity){return{[c]:this.getType(c,e),[l]:this.getType(l,e),[i]:this.getType(i,e),[m]:this.getType(m,e),[p]:this.getType(p,e),[u]:this.getType(u,e),[f]:this.getType(f,e),[g]:this.getType(g,e),[d]:this.getType(d,e),[h]:this.getType(h,e),[y]:this.getType(y,e)}}static createMemo(e){return{name:e,[c]:{},[l]:{},[i]:{},[m]:{},[p]:{},[u]:{},[f]:{},[g]:{},[d]:{},[h]:{}}}static sumAmount(e,t){return Object.values(e[t]??{}).reduce((e,t)=>e+t,0)}}e.exports=v},3307:e=>{const t="overview";const n="damage";const s="health";const a="mana";const o="taken";const r="received";const c="recovery";const l="buff";const i="debuff";const m="movement";const p="skill";const u="misc";const f={Overview:t,Damage:n,Health:s,Mana:a,Taken:o,Received:r,Recovery:c,Buff:l,Debuff:i,Movement:m,Skill:p,Misc:u};const g={[t]:"Overview",[n]:"Damage",[s]:"Healing",[a]:"Mana",[o]:"Damage Taken",[r]:"Healing Received",[c]:"Self Healing",[l]:"Buffs",[i]:"Debuff",[m]:"Movement",[p]:"Skill",[u]:"Miscellaneous"};const d={[n]:o,[s]:r};const h=e=>g[e]??g[u];e.exports={types:f,reverseTypes:d,getTypeName:h,Overview:t}},3539:e=>{const t="\n";const n=t.length;const s={async transform(e,s){e=await e;let a=this.buffers.slice();let o=0;for(;;){const r=e.indexOf(t,o);if(r===-1){this.buffers.push(r>0?e.slice(r):e);return}const c=a.length?a.join(""):"";if(c){a=[];this.buffers=a}s.enqueue(c+e.slice(o,r));o=r+n}}};class a extends TransformStream{constructor(){super({...s,buffers:[]})}}e.exports=a},4026:(e,t,n)=>{const{types:s}=n(3307);const{Recovery:a}=s;e.exports={"Healing Potion":a,"Minor Healing Potion":a,"Health Regen Food":a,"Earth Lunafrost":a,[`Judge's Longing`]:a,"Found Wild Ginseng!":a,"Absorb Damage":a,"Revitalizing Cheer":a,"Sand Soulshard":a,[`Healer's Chalice`]:a,[`Orange Goblet of Honor (Rank 1)`]:a,[`Orange Goblet of Honor (Rank 2)`]:a,[`Orange Goblet of Honor (Rank 3)`]:a,"Conversion Shield":a,"Flame Conversion Shield (Rank 5)":a,"Golden Dawn":a}},4039:(e,t,n)=>{const{types:s}=n(3307);const{Damage:a}=s;e.exports={"Rapid Strike":a,Poisoned:a,"Pin Down":a,"Bleeding (Rank 1)":a,Overwhelm:a,Wallop:a,Shadowsmite:a,"Throw Dagger":a}},5629:(e,t,n)=>{const{types:s}=n(3307);const{Damage:a}=s;e.exports={"Shield Slam":a,"Bull Rush":a,"Boastful Roar":a,Retribution:a}},6934:(e,t,n)=>{const{types:s}=n(3307);const{Damage:a}=s;e.exports={"Triple Slash":a,Charge:a,"Sunder Earth":a,"Precision Strike":a,"Tiger Strike":a,"Hammer Toss":a,"Behind Enemy Lines":a}},7492:(e,t,n)=>{const{types:s}=n(3307);const{Damage:a}=s;e.exports={"Mana Bolts":a,"Crashing Wave":a,"Serpent Bite":a,"Soulbound Edge":a,"Ghastly Pack":a,"Ring Throw":a,Bladefall:a}},7694:(e,t,n)=>{const{types:s}=n(3307);const{Damage:a}=s;e.exports={"Blade Flurry":a,"Crescent Slice":a,"Sinister Strike":a,"Relentless Assault":a,Entangle:a,Bladeblast:a,"Twin Shadow Slash":a}},7700:(e,t,n)=>{const{types:s}=n(3307);const{Damage:a,Health:o,Skill:r}=s;e.exports={Antithesis:a,Resurgence:o,"Life Skewer":o,Mend:o,"Fervent Healing":o,"Gradual Recovery":o,"Healing Circle":o,Revive:r,"Mana Barrier":r}},7932:(e,t,n)=>{const{types:s}=n(3307);const{Damage:a}=s;e.exports={Flamebolt:a,"Freezing Arrow":a,"Arc Lightning":a,"Electric Shock":a,"Freezing Earth":a,"Flame Barrier":a,"Chain Lightning":a,"Searing Rain":a,"Meteor Strike":a}},8145:(e,t,n)=>{const{types:s}=n(3307);const{Damage:a}=s;e.exports={"Ceaseless Fire":a,"Corrosive Barrage":a,Backdraft:a,"Splinter Shell":a,"Blight Bolt":a,"Vicious Rebuke":a,"Trigger Happy":a,"Collateral Damage":a}},9413:(e,t,n)=>{const{types:s}=n(3307);const{Health:a}=s;e.exports={"Healing Talisman":a,[`Black Dragon's Serenity`]:a}},9752:(e,t,n)=>{const{types:s}=n(3307);const{Skill:a,Health:o}=s;e.exports={"Healing Hymn":a,"[Perform] Ode to Recovery":o}},9780:(e,t,n)=>{const{types:s}=n(3307);const{Damage:a,Health:o}=s;e.exports={[`Dancer's Touch`]:a,"[Dance] Dance of Hope":o,"Divine Blessing":o}},9860:(e,t,n)=>{const{types:s}=n(3307);const{Damage:a}=s;e.exports={[`Comet's Boon`]:a,"Vicious Implosion":a}}},e=>{var t=t=>e(e.s=t);e.O(0,[121],()=>t(1440));var n=e.O()}]);